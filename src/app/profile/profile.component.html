<div class="profile-container" [@fadeIn]>
  <header class="profile-header">
    <h1>Patient Health Profile</h1>
    <p>Update your health details to help us provide better care.</p>
  </header>

  <section class="health-form-section" [@slideIn]="formState">
    <form [formGroup]="healthForm" (ngSubmit)="onSubmit()" class="health-form">
      <div class="form-group">
        <label for="weight">Weight (e.g., 70 kg)</label>
        <input
          id="weight"
          type="number"
          formControlName="weight"
          placeholder="Enter your weight"
          [class.error]="
            healthForm.get('weight')?.touched &&
            healthForm.get('weight')?.hasError('required')
          "
        />
        <div
          class="error"
          *ngIf="
            healthForm.get('weight')?.touched &&
            healthForm.get('weight')?.hasError('required')
          "
        >
          Weight is required.
        </div>
      </div>

      <div class="form-group">
        <label for="height">Height (e.g., 170 cm)</label>
        <input
          id="height"
          type="number"
          formControlName="height"
          placeholder="Enter your height"
          [class.error]="
            healthForm.get('height')?.touched &&
            healthForm.get('height')?.hasError('required')
          "
        />
        <div
          class="error"
          *ngIf="
            healthForm.get('height')?.touched &&
            healthForm.get('height')?.hasError('required')
          "
        >
          Height is required.
        </div>
      </div>

      <div class="form-group">
        <label for="bloodGroup">Blood Group</label>
        <select
          id="bloodGroup"
          formControlName="bloodGroup"
          [class.error]="
            healthForm.get('bloodGroup')?.touched &&
            healthForm.get('bloodGroup')?.hasError('required')
          "
        >
          <option value="" disabled>Select your blood group</option>
          <option value="A+">A+</option>
          <option value="A-">A-</option>
          <option value="B+">B+</option>
          <option value="B-">B-</option>
          <option value="AB+">AB+</option>
          <option value="AB-">AB-</option>
          <option value="O+">O+</option>
          <option value="O-">O-</option>
        </select>
        <div
          class="error"
          *ngIf="
            healthForm.get('bloodGroup')?.touched &&
            healthForm.get('bloodGroup')?.hasError('required')
          "
        >
          Blood group is required.
        </div>
      </div>

      <div class="form-group">
        <label for="allergies">Allergies (if any)</label>
        <textarea
          id="allergies"
          formControlName="allergies"
          placeholder="e.g., Peanuts, Pollen"
        ></textarea>
      </div>

      <div class="form-group">
        <label for="medicalHistory">Medical History (if any)</label>
        <textarea
          id="medicalHistory"
          formControlName="medicalHistory"
          placeholder="e.g., Asthma, Diabetes"
        ></textarea>
      </div>

      <div class="form-group">
        <label for="activityLevel">Activity Level (%)</label>
        <input
          id="activityLevel"
          type="number"
          formControlName="activityLevel"
          placeholder="e.g., 55"
          [class.error]="
            healthForm.get('activityLevel')?.touched &&
            (healthForm.get('activityLevel')?.hasError('min') ||
              healthForm.get('activityLevel')?.hasError('max'))
          "
        />
        <div
          class="error"
          *ngIf="
            healthForm.get('activityLevel')?.touched &&
            (healthForm.get('activityLevel')?.hasError('min') ||
              healthForm.get('activityLevel')?.hasError('max'))
          "
        >
          Activity level must be between 0 and 100.
        </div>
      </div>

      <div class="form-group">
        <label for="waterIntake">Water Intake (%)</label>
        <input
          id="waterIntake"
          type="number"
          formControlName="waterIntake"
          placeholder="e.g., 73"
          [class.error]="
            healthForm.get('waterIntake')?.touched &&
            (healthForm.get('waterIntake')?.hasError('min') ||
              healthForm.get('waterIntake')?.hasError('max'))
          "
        />
        <div
          class="error"
          *ngIf="
            healthForm.get('waterIntake')?.touched &&
            (healthForm.get('waterIntake')?.hasError('min') ||
              healthForm.get('waterIntake')?.hasError('max'))
          "
        >
          Water intake must be between 0 and 100.
        </div>
      </div>

      <button type="submit" class="submit-btn" [disabled]="!healthForm.valid">
        Update Health Details
      </button>
    </form>
  </section>
</div>
